<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Problem Editor - LeetCode Tracker</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .editor-container {
            max-width: 900px;
            margin: 20px auto;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .search-section {
            margin-bottom: 20px;
            padding: 16px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }

        #problem-search {
            width: 100%;
            padding: 10px;
            font-size: 14px;
            border: 1px solid #ced4da;
            border-radius: 4px;
        }

        #search-results {
            margin-top: 10px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            background-color: #ffffff;
        }

        .search-result-item {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #e9ecef;
            transition: background-color 0.2s;
        }

        .search-result-item:hover {
            background-color: #e7f3ff;
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .result-title {
            font-weight: 600;
            color: #007bff;
            margin-bottom: 4px;
        }

        .result-meta {
            font-size: 11px;
            color: #6c757d;
        }

        .editor-section {
            display: none;
            margin-top: 20px;
        }

        .editor-section.active {
            display: block;
        }

        .action-buttons {
            margin-top: 24px;
            display: flex;
            gap: 10px;
        }

        .current-problem-info {
            padding: 12px;
            background-color: #e7f3ff;
            border-left: 4px solid #007bff;
            border-radius: 4px;
            margin-bottom: 20px;
        }

        .current-problem-info h3 {
            margin: 0 0 8px 0;
            font-size: 16px;
            color: #004085;
        }

        .current-problem-info a {
            color: #007bff;
            font-size: 12px;
        }

        .stats-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .stat-card {
            padding: 12px;
            background-color: #f8f9fa;
            border-radius: 4px;
            border: 1px solid #dee2e6;
        }

        .stat-label {
            font-size: 11px;
            color: #6c757d;
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 18px;
            font-weight: 700;
            color: #007bff;
        }

        .attempts-section {
            margin-top: 24px;
            padding: 16px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }

        .attempts-list {
            margin-top: 12px;
        }

        .attempt-item {
            display: grid;
            grid-template-columns: 200px 150px 1fr 60px;
            gap: 12px;
            padding: 16px;
            background-color: #ffffff;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            margin-bottom: 12px;
            align-items: start;
        }

        .attempt-field {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .attempt-field label {
            font-size: 11px;
            font-weight: 600;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .attempt-item input {
            padding: 8px 10px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 13px;
        }

        .attempt-item input:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }

        .time-input-wrapper {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .time-input-wrapper input {
            flex: 1;
        }

        .time-input-wrapper .unit {
            font-size: 12px;
            color: #495057;
            font-weight: 600;
        }

        .confidence-display {
            font-size: 12px;
            padding: 8px 12px;
            border-radius: 6px;
            text-align: center;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        /* Confidence select dropdown */
        .attempt-confidence {
            padding: 8px 10px;
            border: 2px solid #ced4da;
            border-radius: 4px;
            font-size: 13px;
            font-weight: 600;
            background-color: #ffffff;
            cursor: pointer;
        }

        .attempt-confidence:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }

        /* Color-coded option styling (visual cue) */
        .attempt-confidence option[value="mastered"] {
            background-color: #d1ecf1;
            color: #0c5460;
        }
        .attempt-confidence option[value="high"] {
            background-color: #d4edda;
            color: #155724;
        }
        .attempt-confidence option[value="medium"] {
            background-color: #fff3cd;
            color: #856404;
        }
        .attempt-confidence option[value="low"] {
            background-color: #f8d7da;
            color: #721c24;
        }
        .attempt-confidence option[value="auto"] {
            background-color: #e7f3ff;
            color: #004085;
        }

        .confidence-low {
            background-color: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }
        .confidence-medium {
            background-color: #fff3cd;
            color: #856404;
            border: 2px solid #ffeaa7;
        }
        .confidence-high {
            background-color: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }
        .confidence-mastered {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 2px solid #bee5eb;
        }

        .delete-attempt-btn {
            padding: 8px 12px;
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            align-self: center;
            transition: background-color 0.2s;
        }

        .delete-attempt-btn:hover {
            background-color: #c82333;
            box-shadow: 0 2px 4px rgba(220, 53, 69, 0.3);
        }

        .add-attempt-btn {
            margin-top: 10px;
            padding: 8px 16px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
        }

        .add-attempt-btn:hover {
            background-color: #218838;
        }

        .help-text {
            margin-top: 12px;
            padding: 10px;
            background-color: #fff3cd;
            border-left: 3px solid #ffc107;
            border-radius: 4px;
            font-size: 12px;
            color: #856404;
        }

        .status-section {
            margin-top: 20px;
            padding: 16px;
            background-color: #fff3cd;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
        }

        .status-section h3 {
            margin: 0 0 12px 0;
            font-size: 14px;
            color: #856404;
        }

        .status-section button {
            margin-right: 10px;
        }


    </style>
</head>
<body>
<div class="editor-container">
    <h1>üìù Smart Problem Editor</h1>
    <p style="color: #6c757d; font-size: 13px; margin-bottom: 20px;">
        Edit times and add/remove attempts. Everything else is automatically recalculated using SRS logic.
    </p>

    <!-- Search Section -->
    <div class="search-section">
        <input
                type="text"
                id="problem-search"
                placeholder="Search for a problem by name or paste LeetCode URL..."
        >
        <div id="search-results"></div>
    </div>

    <!-- Editor Section -->
    <div id="editor-section" class="editor-section">
        <div class="current-problem-info">
            <h3 id="current-problem-title">No problem selected</h3>
            <a id="current-problem-link" href="#" target="_blank">View on LeetCode</a>
        </div>

        <!-- Progress Stats (READ-ONLY) -->
        <div class="stats-display">
            <div class="stat-card">
                <div class="stat-label">Status</div>
                <div class="stat-value" id="stat-status" style="font-size: 14px;">Not Started</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">SRS Stage</div>
                <div class="stat-value" id="stat-stage">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Next Review</div>
                <div class="stat-value" id="stat-next-review" style="font-size: 14px;">N/A</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Last Confidence</div>
                <div class="stat-value" id="stat-confidence" style="font-size: 14px;">None</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Lapses</div>
                <div class="stat-value" id="stat-lapses">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Total Attempts</div>
                <div class="stat-value" id="stat-attempts">0</div>
            </div>
        </div>

        <!-- Attempts Section (EDITABLE) -->
        <div class="attempts-section">
            <h3>üìä Submission History</h3>
            <p class="help-text">
                üí° <strong>How it works:</strong> Edit time and/or confidence for any attempt.
                <br>‚Ä¢ <strong>Auto mode:</strong> Confidence calculated from time using your thresholds
                <br>‚Ä¢ <strong>Manual override:</strong> Choose any confidence level (overrides time-based calculation)
                <br>‚Ä¢ All SRS metrics (stage, lapses, next review) update in <strong>real-time preview</strong> as you
                edit
                <br>‚Ä¢ Click "Save" to persist changes to storage
            </p>
            <div class="attempts-list" id="attempts-list">
                <!-- Attempts will be inserted here -->
            </div>
            <button class="add-attempt-btn" id="add-attempt-btn">+ Add New Attempt</button>
        </div>

        <!-- Status Management -->
        <div class="status-section">
            <h3>‚öôÔ∏è Status Management</h3>
            <button class="danger-btn" id="reset-btn">üîÑ Mark as "Not Started" (Delete All Progress)</button>
            <p style="margin-top: 8px; font-size: 11px; color: #856404;">
                This will erase all attempts and reset the problem to its initial state.
            </p>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="primary-btn" id="save-btn">üíæ Save & Recalculate</button>
            <button class="secondary-btn" id="cancel-btn">Cancel</button>
        </div>
    </div>
</div>

<script src="srsEngine.js"></script>
<script src="editor.js"></script>
</body>
</html>